<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>gc管理</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .container {
            max-width: 80%;
            margin: 0 auto;
        }
        .controls {
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        .controls span{
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        select, button {
            padding: 8px;
            margin-right: 10px;
            font-size: 1em;
            width: 20%;
            height: 60px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
            width: 14%;
        }
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        td {
            height: 60px;
            vertical-align: middle;
            transition: background-color 0.3s;
        }
        .random-number {
            position: relative;
            left: 30%;
            top: 30%;
            font-size: 0.8em;
            color: #666;
            padding: 1px;
        }
    </style>
</head>
<body>
    <div class="container">
      <div style="font-size: 1.2em;">
        <p>这是一个按月随机生成高潮管理的网站，用户可以选择月份和难度进行随机生成。</p>
        <br/>
        <p>如果想让我控制你的自慰时的节奏，点这里<a href="https://btzz996.github.io/kzjz.html">控制你的自慰节奏</a></p>
        <hr/>
        <div style="font-weight: bold;"><div style="background-color: #ffcccc;width: 20px;height: 20px;display: inline-block;"></div> 红色 禁止日: 禁止触摸！禁止高潮！<span style="color: #ff0000;">生理期一律为禁止日！</span></div>
        <div style="font-weight: bold;"><div style="background-color: #ffffcc;width: 20px;height: 20px;display: inline-block;"></div> 黄色 边缘日: 必须边缘日期右下角次数且只能达到边缘！</div>
        <div style="font-weight: bold;"><div style="background-color: #ccffcc;width: 20px;height: 20px;display: inline-block;"></div> 绿色 放纵日: 必须自慰且达到高潮日期右下角次数！</div>
        <div style="font-weight: bold;"><div style="background-color: #cce6ff;width: 20px;height: 20px;display: inline-block;"></div> 蓝色 请求日: 向任何人发起高潮请求，对方同意后至多高潮一次，不同意则边缘三次！<br/>(也可以根据日期右下角数字为单数则允许，双数则禁止)</div>
        <hr/>
        <p style="font-weight: bold;">请自行截图保存！请自行截图保存！请自行截图保存！</p>
      </div>
        <div class="controls">
            <span>月份：</span>
            <select id="monthSelect" onchange="generateCalendar()">
                <option value="0">一月</option>
                <option value="1">二月</option>
                <option value="2">三月</option>
                <option value="3">四月</option>
                <option value="4">五月</option>
                <option value="5">六月</option>
                <option value="6">七月</option>
                <option value="7">八月</option>
                <option value="8">九月</option>
                <option value="9">十月</option>
                <option value="10">十一月</option>
                <option value="11">十二月</option>
            </select>
            <span>难度：</span>
            <select id="difficulty">
                <option value="0">简单</option>
                <option value="1">中等</option>
                <option value="2">困难</option>
            </select>
            <!--
            <button onclick="generateCalendar()">生成日历</button>
            -->
            <button onclick="changeColors()">生成管理日历</button>
        </div>
        <div id="calendar"></div>
    </div>

    <script>
        let count = 0;
        function generateCalendar() {
            const month = parseInt(document.getElementById('monthSelect').value);
            const year = new Date().getFullYear(); // 使用当前年份
            const calendarDiv = document.getElementById('calendar');
            
            // 创建日期对象
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startingDay = firstDay.getDay();
            
            // 创建表格
            let html = '<table>';
            html += '<tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr>';
            
            let date = 1;
            for (let i = 0; i < 6; i++) {
                html += '<tr>';
                for (let j = 0; j < 7; j++) {
                    if ((i === 0 && j < startingDay) || date > lastDay.getDate()) {
                        html += '<td></td>';
                    } else {
                        //const randomNum = Math.floor(Math.random() * 10) + 1;
                        html += `<td class="date-cell">
                            ${date}
                            <span class="random-number"></span>
                        </td>`;
                        date++;
                    }
                }
                html += '</tr>';
                if (date > lastDay.getDate()) break;
            }
            html += '</table>';
            
            calendarDiv.innerHTML = html;
        }

        function changeColors() {
          if(count>=1){
            alert("只有一次机会哦！");
            return;
          }
            count += 1;
          //红：禁止gc 绿：允许gc 黄：边缘 蓝：任务
            // 颜色概率配置（总概率100%）
            let COLOR_PROBABILITY = [];
            const num = parseInt(document.getElementById('difficulty').value);
            if(num==0){
              COLOR_PROBABILITY = [
                  { color: '#ffcccc', weight: 30 }, // 红色 30%
                  { color: '#ffffcc', weight: 30 }, // 黄色 30%
                  { color: '#cce6ff', weight: 25 }, // 蓝色 25%
                  { color: '#ccffcc', weight: 15 }   // 绿色 15%
              ];
            }else if(num==1){
              COLOR_PROBABILITY = [
                  { color: '#ffcccc', weight: 30 }, // 红色 30%
                  { color: '#ffffcc', weight: 35 }, // 黄色 35%
                  { color: '#cce6ff', weight: 25 }, // 蓝色 25%
                  { color: '#ccffcc', weight: 10 }   // 绿色 10%
              ];
            }else if(num==2){
              COLOR_PROBABILITY = [
                  { color: '#ffcccc', weight: 35 }, // 红色 35%
                  { color: '#ffffcc', weight: 40 }, // 黄色 40%
                  { color: '#cce6ff', weight: 20 }, // 蓝色 20%
                  { color: '#ccffcc', weight: 5 }   // 绿色 5%
              ];
            }
            const dateCells = document.querySelectorAll('.date-cell');
            
            dateCells.forEach(cell => {
                // 生成随机数并选择颜色
                let random = Math.random() * 100;
                let accumulated = 0;
                
                for(const colorObj of COLOR_PROBABILITY) {
                    accumulated += colorObj.weight;
                    if(random <= accumulated) {
                        cell.style.backgroundColor = colorObj.color;
                        break;
                    }
                }
                let randomNum = 0;
                // 生成随机数字（1-10）
                if(num==0){
                  randomNum = Math.floor(Math.random() * 4) + 1;
                }else if(num==1){
                  randomNum = Math.floor(Math.random() * 8) + 1;
                }else if(num==2){
                  randomNum = Math.floor(Math.random() * 12) + 1;
                }
                const numberSpan = cell.querySelector('.random-number');
                numberSpan.textContent = randomNum;
            });
        }

        // 初始加载时生成日历
        generateCalendar();
    </script>
</body>
</html>